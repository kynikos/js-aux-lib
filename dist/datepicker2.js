// Generated by CoffeeScript 2.1.1
// lib.cs.misc - Check the status of code repositories under a root directory.
// Copyright (C) 2016 Dario Giovannetti <dev@dariogiovannetti.net>

// This file is part of lib.cs.misc.

// lib.cs.misc is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.

// lib.cs.misc is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.

// You should have received a copy of the GNU General Public License
// along with lib.cs.misc.  If not, see <http://www.gnu.org/licenses/>.
if ((typeof $ === "undefined" || $ === null) && (typeof jQuery === "undefined" || jQuery === null)) {
  window.$ = window.jQuery = require('jquery');
}

require("jquery-ui-browserify");

module.exports.DatePicker = class DatePicker {
  constructor() {
    this.display = $('<input>').attr({
      'type': 'text',
      'readonly': 'true',
      'size': 30,
      'placeholder': 'Select a date'
    }).addClass('datepicker-display').click(() => {
      return this.input.datepicker('show');
    });
    this.input = $('<input>').attr('type', 'hidden').datepicker({
      dateFormat: 'yy-mm-dd',
      altField: this.display,
      altFormat: "DD, d MM yy",
      firstDay: 1
    });
  }

  show() {
    return this.input.datepicker('show');
  }

  hide() {
    return this.input.datepicker('hide');
  }

  set_date(date) {
    if (typeof date === 'string') {
      date = $.datepicker.parseDate('yy-mm-dd', date);
    }
    return this.input.datepicker("setDate", date);
  }

  get_date() {
    return this.input.val();
  }

  enable() {
    return this.display.removeAttr('disabled');
  }

  disable() {
    this.input.datepicker("setDate", null);
    return this.display.attr('disabled', 'true');
  }

};
